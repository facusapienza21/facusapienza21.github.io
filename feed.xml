<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en"><generator uri="https://jekyllrb.com/" version="4.3.2">Jekyll</generator><link href="https://facusapienza21.github.io/feed.xml" rel="self" type="application/atom+xml"/><link href="https://facusapienza21.github.io/" rel="alternate" type="text/html" hreflang="en"/><updated>2023-11-23T06:22:15+00:00</updated><id>https://facusapienza21.github.io/feed.xml</id><title type="html">blank</title><subtitle>Facundo Sapienza personal website </subtitle><entry><title type="html">Creating a single stadarized bibliography file from a bunch of bibliography and latex files</title><link href="https://facusapienza21.github.io/blog/2023/bib-manager/" rel="alternate" type="text/html" title="Creating a single stadarized bibliography file from a bunch of bibliography and latex files"/><published>2023-11-22T15:09:00+00:00</published><updated>2023-11-22T15:09:00+00:00</updated><id>https://facusapienza21.github.io/blog/2023/bib-manager</id><content type="html" xml:base="https://facusapienza21.github.io/blog/2023/bib-manager/"><![CDATA[<p>Tired of formating you bibliography files in latex? Are you a little bit obsessed about the format of your text files, including author, title, year, … ordering or spacing/tabulation (that will be me)? Do you have a bunch of different bibliography and latex files that all combine to compule one single manuscript and you would like to unify them all under a single <code class="language-plaintext highlighter-rouge">bibliography.bib</code> file? Then you will find this post useful.</p> <p>Maybe you latex project looks like this,</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>.
|- main.tex
|- main.pdf
|- chapters
   |- intro.tex
   |- chp_1.tex
   |  ...
   |- chp_19.tex
|- biblography
   |- bib1.bib
   |- ...
   |- bib11.bib
</code></pre></div></div> <p>and you spend quite some time curating you bibliography files so they look complete and well organize, but instead they look like this:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># bib1.bib

@incollection{key1,
title = {A cool paper},
author = {My collegue},
booktitle = {Advances in Neural Information Processing Systems 24},
pages = {1899--1907},
year = {2011},
}

@article {key2,
    AUTHOR = {other authors},
     TITLE = {Some title},
   JOURNAL = {Ann. Appl. Probab.},
}
</code></pre></div></div> <p>If well in <code class="language-plaintext highlighter-rouge">biblatex</code> we can add multiple bibliography files with the <code class="language-plaintext highlighter-rouge">\addbibresource</code> command in the preamble, it could be useful to manipulate your bibliography entries in a more convenient way. Fortunately for us, the Python library <code class="language-plaintext highlighter-rouge">pybtex</code> allow us to do this. Let’s see this with one example. We start with the following imports.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">re</span>
<span class="kn">import</span> <span class="n">glob</span><span class="p">,</span> <span class="n">os</span>
<span class="kn">import</span> <span class="n">warnings</span>

<span class="kn">from</span> <span class="n">pybtex.database.input</span> <span class="kn">import</span> <span class="n">bibtex</span>
<span class="kn">from</span> <span class="n">pybtex.database</span> <span class="kn">import</span> <span class="n">BibliographyData</span>

<span class="kn">import</span> <span class="n">pybtex.errors</span>
<span class="c1"># This is so we can ignore duplicated entries
</span><span class="n">pybtex</span><span class="p">.</span><span class="n">errors</span><span class="p">.</span><span class="nf">set_strict_mode</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
</code></pre></div></div> <p>Let’s suppose you have many latex <code class="language-plaintext highlighter-rouge">.tex</code> files that you are using in a project (and for example are included with the <code class="language-plaintext highlighter-rouge">\include</code> command in <code class="language-plaintext highlighter-rouge">main.tex</code>), but you also have multiple sources or references, <code class="language-plaintext highlighter-rouge">bib1.bib</code>, <code class="language-plaintext highlighter-rouge">bib2.bib</code>, etc. Given a working directy, we can find all the files in that directory and its subfolders with the right extensiosn with the following function.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">find_extension</span><span class="p">(</span><span class="n">extention</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">
    Find all files with required extension in path system
    </span><span class="sh">"""</span>

    <span class="n">res</span> <span class="o">=</span> <span class="p">[]</span>   

    <span class="k">for</span> <span class="n">root</span><span class="p">,</span> <span class="n">dirs</span><span class="p">,</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">os</span><span class="p">.</span><span class="nf">walk</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
        <span class="k">for</span> <span class="nb">file</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
            <span class="nf">if</span><span class="p">(</span><span class="nb">file</span><span class="p">.</span><span class="nf">endswith</span><span class="p">(</span><span class="n">extention</span><span class="p">)):</span>
                <span class="n">res</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="n">root</span><span class="p">,</span><span class="nb">file</span><span class="p">))</span>
                
    <span class="k">return</span> <span class="n">res</span>

<span class="n">tex_files</span> <span class="o">=</span> <span class="nf">find_extension</span><span class="p">(</span><span class="sh">"</span><span class="s">.tex</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">.</span><span class="sh">"</span><span class="p">)</span>
<span class="n">bib_files</span> <span class="o">=</span> <span class="nf">find_extension</span><span class="p">(</span><span class="sh">"</span><span class="s">.bib</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">.</span><span class="sh">"</span><span class="p">)</span>
</code></pre></div></div> <p>Now, we can just read all the <code class="language-plaintext highlighter-rouge">.tex</code> files and merge them in one single string, and then parse it so it identifies all the entries that match the patern <code class="language-plaintext highlighter-rouge">\cite{...}</code> inside any of the <code class="language-plaintext highlighter-rouge">.tex</code> files:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Attach all the text in files to a single string
</span><span class="n">latex</span> <span class="o">=</span> <span class="sh">""</span>

<span class="k">for</span> <span class="nb">file</span> <span class="ow">in</span> <span class="n">tex_files</span><span class="p">:</span>
    <span class="c1"># with open("tex/sections/adjoint-state.tex", 'r') as f:
</span>    <span class="k">with</span> <span class="nf">open</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="sh">'</span><span class="s">r</span><span class="sh">'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">latex</span> <span class="o">+=</span> <span class="n">f</span><span class="p">.</span><span class="nf">read</span><span class="p">()</span>

<span class="c1"># Parser
</span><span class="n">rx</span> <span class="o">=</span> <span class="n">re</span><span class="p">.</span><span class="nf">compile</span><span class="p">(</span><span class="sa">r</span><span class="sh">'''</span><span class="s">(?&lt;!\\)%.+|(\\(?:no)?citep?\{((?!\*)[^{}]+)\})</span><span class="sh">'''</span><span class="p">)</span>
<span class="n">rx</span><span class="p">.</span><span class="nf">finditer</span><span class="p">(</span><span class="n">latex</span><span class="p">)</span>

<span class="n">authors</span> <span class="o">=</span> <span class="p">[]</span>

<span class="n">authors_unformated</span> <span class="o">=</span> <span class="p">[</span><span class="n">m</span><span class="p">.</span><span class="nf">group</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">rx</span><span class="p">.</span><span class="nf">finditer</span><span class="p">(</span><span class="n">latex</span><span class="p">)</span> <span class="k">if</span> <span class="n">m</span><span class="p">.</span><span class="nf">group</span><span class="p">(</span><span class="mi">2</span><span class="p">)]</span>

<span class="c1"># Format author entries for cases like \cite{author1, author2}
</span><span class="k">for</span> <span class="n">author_ref</span> <span class="ow">in</span> <span class="n">authors_unformated</span><span class="p">:</span>
    <span class="n">new_authors</span> <span class="o">=</span> <span class="n">author_ref</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="sh">'</span><span class="s">,</span><span class="sh">'</span><span class="p">)</span>
    <span class="n">new_authors</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="p">.</span><span class="nf">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">new_authors</span><span class="p">]</span>
    <span class="n">authors</span> <span class="o">+=</span> <span class="n">new_authors</span>
</code></pre></div></div> <p>Now the list <code class="language-plaintext highlighter-rouge">authors</code> contains all the reference entries used in at least one of the <code class="language-plaintext highlighter-rouge">.tex</code> files in our working directory. The next step is to use these as keys to find the corresponding bibliography entry and store them in a new bibliography file. We do this by parsing the different bibliography files and store them all together in one single list.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">bib_data</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="nb">file</span> <span class="ow">in</span> <span class="n">bib_files</span><span class="p">:</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">bibtex</span><span class="p">.</span><span class="nc">Parser</span><span class="p">()</span>
    <span class="n">bib_data</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">parser</span><span class="p">.</span><span class="nf">parse_file</span><span class="p">(</span><span class="nb">file</span><span class="p">))</span>
</code></pre></div></div> <p>We can finally create a new black bibliography file with <code class="language-plaintext highlighter-rouge">pybtex</code> that add the corresponding bibliography entries based on the contents of your latex files:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">filtered_bib_data</span> <span class="o">=</span> <span class="nc">BibliographyData</span><span class="p">()</span>

<span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="n">authors</span><span class="p">:</span> 
    <span class="n">ref_founded</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="k">for</span> <span class="n">bib_source</span> <span class="ow">in</span> <span class="n">bib_data</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">ref_founded</span><span class="p">:</span>
                <span class="n">filtered_bib_data</span><span class="p">.</span><span class="nf">add_entry</span><span class="p">(</span><span class="n">entry</span><span class="p">,</span> <span class="n">bib_source</span><span class="p">.</span><span class="n">entries</span><span class="p">[</span><span class="n">entry</span><span class="p">])</span>
                <span class="n">ref_founded</span> <span class="o">=</span> <span class="bp">True</span>
                <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">Reference found {}</span><span class="sh">"</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="n">entry</span><span class="p">))</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">ref_founded</span><span class="p">:</span>
            <span class="n">warnings</span><span class="p">.</span><span class="nf">warn</span><span class="p">(</span><span class="sh">"</span><span class="s">Reference not found: {}</span><span class="sh">"</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="n">entry</span><span class="p">))</span>
</code></pre></div></div> <p>and finally export a new <code class="language-plaintext highlighter-rouge">.bib</code> file with the references in a nice format:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">filtered_bib_data</span><span class="p">.</span><span class="nf">to_file</span><span class="p">(</span><span class="sh">"</span><span class="s">bib_test.bib</span><span class="sh">"</span><span class="p">,</span> <span class="n">bib_format</span><span class="o">=</span><span class="sh">"</span><span class="s">bibtex</span><span class="sh">"</span><span class="p">)</span>
</code></pre></div></div> <p>Here is a single <a href="https://github.com/facusapienza21/DiffEqSensitivity-Review/blob/main/.utils/biblatex_merger.py">Python script</a> that does all this work and you can directly execute from the terminal to produce an unified and formated <code class="language-plaintext highlighter-rouge">.bib</code> file. Why to stop here? You can further create a <a href="https://github.com/facusapienza21/DiffEqSensitivity-Review/blob/main/.github/workflows/biblatex.yml">GitHub Action</a> that does this for you automatically every time you make changes to your <code class="language-plaintext highlighter-rouge">.bib</code> and <code class="language-plaintext highlighter-rouge">.tex</code> files!</p>]]></content><author><name></name></author><category term="posts"/><category term="computing"/><category term="scientific-writing"/><summary type="html"><![CDATA[Bored of formating bibliography files in latex manually? Solve this for good.]]></summary></entry><entry><title type="html">Displaying External Posts on Your al-folio Blog</title><link href="https://facusapienza21.github.io/blog/2022/displaying-external-posts-on-your-al-folio-blog/" rel="alternate" type="text/html" title="Displaying External Posts on Your al-folio Blog"/><published>2022-04-23T23:20:09+00:00</published><updated>2022-04-23T23:20:09+00:00</updated><id>https://facusapienza21.github.io/blog/2022/displaying-external-posts-on-your-al-folio-blog</id><content type="html" xml:base="https://facusapienza21.github.io/blog/2022/displaying-external-posts-on-your-al-folio-blog/"><![CDATA[]]></content><author><name></name></author></entry><entry><title type="html">About the methaphysical content of the EM field</title><link href="https://facusapienza21.github.io/blog/2021/meta-EM-field/" rel="alternate" type="text/html" title="About the methaphysical content of the EM field"/><published>2021-02-10T00:00:00+00:00</published><updated>2021-02-10T00:00:00+00:00</updated><id>https://facusapienza21.github.io/blog/2021/meta-EM-field</id><content type="html" xml:base="https://facusapienza21.github.io/blog/2021/meta-EM-field/"><![CDATA[<p>The principle of conservation of energy is one of the central pillars in modern physics. There are many different forms of exchangeable energy. However, how much metaphysical content does each one of these different notions of energy have? Is it a must to believe in such manifestations of energy in order to describe the behaviour of the world? The usefulness of such concepts is out of question, especially when used as mathematical tools to model physical systems. But at a more fundamental level, do we need to believe in them?</p> <p>There are many ways to address this question and contextualize it into more complex discussions in philosophy, such as the debate of realism-antirealism. In this blog post I would like to focus on one of these energetic entities: the electromagnetic field and the photon.</p> <p>Most of the objects we see and we experience in our everyday life are described by Classical Electromagnetism (EM), the theory that describes the behaviour of electrically charged particles and electromagnetic waves (light) <d-footnote>This analysis was carried out just for the case of the electromagnetic field in the context of classical EM. It would be interesting to think about how many of these ideas can be translated to the photon in the context of Quantum EM and other bosons in the Standard Model (gluons for the strong interactions and Z and W bosons for the weak interaction). In Quantum Electrodynamics, this same example is illustrated through the simplest of the Feynman’s diagrams footnote.</d-footnote>. Maxwell’s four equations give a full and compact description of the behaviour of the electromagnetic field, described by both the electrical (\(E\)) and magnetic (\(B\)) three-dimensional fields, and how these are linked to the distribution and movement of charged particles in space. From the EM field, we can infer the force that acts in a given charged particle immersed in that field using the Lorentz equation.</p> \[F = q (E + v \times B)\] <p>Once we have the force, we can use Newton’s equation to compute the trajectory of charged particles given some initial conditions. Then, a standard problem that will rise in an electromagnetism course will be this: computing the EM field that a set of charged particles moving in space generate in order to infer the effect that these will have in the movements of any other particle.</p> <p>Even more, Maxwell’s equations allow us to compute the evolution in time of \(E\) and \(B\) given some initial conditions of the field plus boundary conditions (that is, the value of both \(E\) and \(B\) on a surface that surrounds our physical system; if we are considering an open system without boundaries, we don’t need to specify this). In the latter case, there is no need to specify the state of the charged particles that generated this EM field in the first place.</p> <p>This last formulation suggests that the EM field could be understood as an own entity, such as a particle in Newtonian physics. Given some initial conditions, we can compute the dynamics of the EM field based on Maxwell’s equations. Even more suggestive than this are the conservation theorems we find in EM. The EM field has a density energy and a momentum given by the Poynting vector; the full contributions of the energy/momentum of the particles and EM field of a system are conserved, but not separately. This form of energy propagates through space following a wave equation, such as waves in the water. Its speed is given by the speed of light, which quantifies the speed at which the effect of one electric change can affect another.</p> <p>Let’s consider the following example in order to start picturing the main thesis. There are two charged particles, A and B, separated by some distance between them. While B is still, we move particle A a little bit and then we stop the perturbation (time 1 in the figure). Since the speed of light is finite, we need to wait some time until B can feel the effect of moving particle A. During this gap, both A and B are still and an EM wave is traveling from A to B. With some delay, particle B will feel the previous movement of A and will start moving. We can compute this movement by using the Lorentz force. This sequence is illustrated in the following figure</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;img
  src="/assets/img/blog/meta-em.jpg"
  class="img-fluid rounded z-depth-1"
  width="auto"
  height="auto"
  
  
  
  
  
  
  data-zoomable
  onerror="this.onerror=null; $('.responsive-img-srcset').remove();"
/&gt;
</code></pre></div></div> <p>&lt;/picture&gt;</p> <p>&lt;/figure&gt;</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;/div&gt;
</code></pre></div></div> <p>&lt;/div&gt; –&gt;</p> <p>If we freeze the state of the universe at time \(t_2\), the total kinetic and potential energy of both A and B is less that the one at time \(t_1\) or \(t_3\), where there was a positive contribution to the kinetic energy given by the movement of A and B, respectively. During \(t_2\), the contribution of the kinetic energy is zero, which violates the conservation of energy of the particles. Of course, in order to have a full description of the energy of the system we need to include the energy of the EM field. From this simple analysis we conclude that denying the metaphysical content of the electromagnetic field leads us to a violation of the conservation of energy.</p> <p>Is there anything even more dramatic than discarding the principle of conservation of energy? Well, I think there is. If we want to believe that the EM field has no physical existence and meaning besides just being a simplification of the calculations, we face a more serious problem. Just with the information of the state of all particles at time \(t_2\), we cannot predict the evolution of the system in the future. Effectively, the information about the anterior movement of particle A is not included in the instant physical description of the universe at time \(t_2\). Point in favor for the existence of the EM field.</p> <p>If you don’t want to believe in the metaphysical content of the EM field or in particles of light, that is perfectly fine in classical physics. Every time someone tells you <em>an electromagnetic wave hits that electron</em>, you can react with <em>well, I would rather say that the electron just felt the remote effect of another charged particle in the universe right now. What you call electromagnetic field is no more than a mathematical construction that you create in order to store all the information about the past in the present</em>. Here, we identify an even more central axiom in modern physics: the notion that if we know everything about the state of the universe right now, we can predict all its future behaviour. I will refer to this as the present hypothesis. This is, in my opinion, an even more important principle than the conservation of energy and it is highly implicit in our modern understanding of nature.</p> <p>From this analysis, my conclusion is that it is scientific to deny the existence of the electromagnetic field in EM. Following Hilbert’s formalism, we can believe that E and B are just mathematical tools that allow us to manipulate and predict the state of particles in the universe, entities that we create in order to keep track of the past. Accepting this view will force us to drop both the conservation of energy and the present principle. On the other hand, accepting the existence of the EM field helps us to keep two of the milestones in modern science, which of course, are priors of the theory and don’t need validation, they are more like axioms.</p> <p>Before finishing, I would like to make a few remarks. I think from the moment we start studying physics, the present hypothesis is something we all become familiar with. In Newtonian physics, we learn to solve the trajectory of a particle from its initial position and initial speed. The mathematical setup in EM, fluid dynamics, quantum mechanics, cosmology, and other disciplines is built upon differential equations. In order to solve a differential equation, we need to also provide initial conditions. For random processes, the present hypothesis coincides with the Markov or memoryless property.</p>]]></content><author><name>Facundo Sapienza</name></author><category term="phylosophy"/><category term="physics"/><summary type="html"><![CDATA[Some phylosophical gambling around physical ideas]]></summary></entry></feed>